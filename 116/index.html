<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>go fiber + swagger 사용기</title>
<meta
name="description"
content="정적페이지로 운영하는 개발 블로그입니다."
/>
<link
rel="shortcut icon"
type="image/png"
sizes="144x144"
href="/static/favicon-144x144.png"
/>
<link
rel="icon"
type="image/png"
sizes="16x16"
href="/static/favicon-16x16.png"
/>
<link
rel="icon"
type="image/png"
sizes="32x32"
href="/static/favicon-32x32.png"
/>
<link
rel="icon"
type="image/png"
sizes="192x192"
href="/static/favicon-192x192.png"
/>
<link
rel="apple-touch-icon"
sizes="57x57"
href="/static/apple-touch-icon-57x57.png"
/>
<link
rel="apple-touch-icon"
sizes="72x72"
href="/static/apple-touch-icon-72x72.png"
/>
<link
rel="apple-touch-icon"
sizes="76x76"
href="/static/apple-touch-icon-76x76.png"
/>
<link
rel="apple-touch-icon"
sizes="114x114"
href="/static/apple-touch-icon-114x114.png"
/>
<link
rel="apple-touch-icon"
sizes="120x120"
href="/static/apple-touch-icon-120x120.png"
/>
<link
rel="apple-touch-icon"
sizes="144x144"
href="/static/apple-touch-icon-144x144.png"
/>
<link
rel="apple-touch-icon"
sizes="152x152"
href="/static/apple-touch-icon-152x152.png"
/>
<link
rel="apple-touch-icon"
sizes="154x154"
href="/static/apple-touch-icon-154x154.png"
/>
<link
rel="apple-touch-icon"
sizes="180x180"
href="/static/apple-touch-icon-180x180.png"
/>
<link rel="stylesheet" href="/static/style.css">
<meta name="theme-color" content="#ff5722">
<meta property="og:type" content="website">
<meta property="og:title" content="go fiber + swagger 사용기">
<meta property="og:description" content="공부한 개발 정보를 공유합니다.">
<meta property="og:image" content="https://devblog.lazyig.com/116//static/ogimg.png">
<meta property="og:url" content="https://devblog.lazyig.com/116/">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8149987977999297" crossorigin="anonymous"></script>
<link rel="stylesheet"
href="/static/highlight.css">
</head>
<body class="kigui one">
<header class="kigui header">
<div class="header-buttons">
<span id="headerBtn" class="nav-header-btn"><img src="/static/menu-w.svg" alt="Menu"></span>
</div>
<a href="/">
<h1 class="title">
메모용 개발 블로그
</h1>
</a>
</header>
<div class="kigui header-space"></div>
<section class="kigui">
<div id="navBar" class="nav-bar">

<div class="nav-header">
<span id="catToggle" class="nav-header-btn"><img src="/static/menu.svg" alt="Menu"></span>
</div>
<ul class="category">

<li style="padding-left: 0px">
<a href="/c/전체보기/1/">전체보기<span class="nav-cat-cnt">(110)</span></a>
</li>

<li style="padding-left: 15px">
<a href="/c/OS/1/">OS<span class="nav-cat-cnt">(35)</span></a>
</li>

<li style="padding-left: 30px">
<a href="/c/Linux/1/">Linux<span class="nav-cat-cnt">(23)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/MacOS/1/">MacOS<span class="nav-cat-cnt">(8)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/Windows/1/">Windows<span class="nav-cat-cnt">(4)</span></a>
</li>



<li style="padding-left: 15px">
<a href="/c/데이터베이스/1/">데이터베이스<span class="nav-cat-cnt">(3)</span></a>
</li>

<li style="padding-left: 30px">
<a href="/c/Oracle/1/">Oracle<span class="nav-cat-cnt">(1)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/Postgresql/1/">Postgresql<span class="nav-cat-cnt">(1)</span></a>
</li>



<li style="padding-left: 15px">
<a href="/c/Develop/1/">Develop<span class="nav-cat-cnt">(23)</span></a>
</li>

<li style="padding-left: 30px">
<a href="/c/CSS3/1/">CSS3<span class="nav-cat-cnt">(3)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/HTML5/1/">HTML5<span class="nav-cat-cnt">(2)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/JavaScript/1/">JavaScript<span class="nav-cat-cnt">(4)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/React/1/">React<span class="nav-cat-cnt">(1)</span></a>
</li>


<li style="padding-left: 30px">
<a href="/c/Svelte/1/">Svelte<span class="nav-cat-cnt">(2)</span></a>
</li>



<li style="padding-left: 15px">
<a href="/c/개발일기/1/">개발일기<span class="nav-cat-cnt">(9)</span></a>
</li>


<li style="padding-left: 15px">
<a href="/c/Git/1/">Git<span class="nav-cat-cnt">(3)</span></a>
</li>


<li style="padding-left: 15px">
<a href="/c/GitLab/1/">GitLab<span class="nav-cat-cnt">(12)</span></a>
</li>


<li style="padding-left: 15px">
<a href="/c/Nginx/1/">Nginx<span class="nav-cat-cnt">(7)</span></a>
</li>


<li style="padding-left: 15px">
<a href="/c/기타/1/">기타<span class="nav-cat-cnt">(15)</span></a>
</li>


<li style="padding-left: 15px">
<a href="/c/이 블로그의 오픈소스/1/">이 블로그의 오픈소스<span class="nav-cat-cnt">(3)</span></a>
</li>



</ul>
</div>
<script>
let catToggle = document.getElementById("catToggle");
let headerBtn = document.getElementById("headerBtn");
let navBar = document.getElementById("navBar");
catToggle.addEventListener("click", () => {
navBar.classList.toggle("show");
});
headerBtn.addEventListener("click", () => {
navBar.classList.toggle("show");
})
</script>
<div class="kigui frame">
<p class="category-path">

<a href="/c/전체보기/1/">전체보기</a>
<span> > </span>

<a href="/c/Develop/1/">Develop</a>
<span> > </span>

</p>
<h1 class="article-title"><a href="https://devblog.lazyig.com/116/">go fiber + swagger 사용기</a></h1>
<p class="write-date">2024-02-16 17:53:44</p>
<div class="markdown-body">
<p>API 서버를 작성하면서 swagger 사용법을 간단하게 정리해보고자 한다</p>
<h2>Swagger?</h2>
<p>Go 언어로 API 서버를 작성 시 API 정보를 소스코드와 함께 주석으로 관리하면 문서를 생성해주는 라이브러리이다.</p>
<p>다양한 웹 프레임워크가 있는 Go 언어답게 이 라이브러리도 다양한 프레임워크를 지원한다.</p>
<p>Github 링크: <a href="https://github.com/swaggo/swag">https://github.com/swaggo/swag</a></p>
<p>여기서 Fiber 웹 프레임워크를 이용해서 작성하고 있으며 이에 대한 설정 방법도 저장소에 잘 나와있다.</p>
<p>Github 링크: <a href="https://github.com/gofiber/swagger">https://github.com/gofiber/swagger</a></p>
<h2>초기 설정</h2>
<p>swagger는 소스코드를 대상으로 문서 표현을 위한 json 파일을 생성한다.</p>
<p>그러므로 이를 수행할 커맨드라인 프로그램을 우선 설치해준다.</p>
<pre><code class="language-sh">go install github.com/swaggo/swag/cmd/swag@latest
</code></pre>
<blockquote>
<p>정상적인 설치를 확인하기 위해서는 <code>swag</code> 명령을 입력해보자.</p>
<p>만약 명령어를 찾을 수 없다면 GOPATH 환경변수 밑에 bin 경로를 PATH 환경변수에 등록하여야 한다.</p>
</blockquote>
<p>우선 간단하게 동작을 잘하는지 확인하기 위해서 main 메소드와 API 메소드 하나에 간단하게 필수 조건 정도를 샘플로 주석을 달아주었다.</p>
<p><code>main.go</code></p>
<pre><code class="language-go"><span class="hljs-comment">//	@title		API Doc</span>
<span class="hljs-comment">//	@version	1.0</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> {
	...
}
</code></pre>
<p>서비스 파일</p>
<pre><code class="language-go"><span class="hljs-keyword">package</span> v1

<span class="hljs-keyword">import</span> <span class="hljs-string">&quot;github.com/gofiber/fiber/v2&quot;</span>

<span class="hljs-keyword">type</span> PingResponse <span class="hljs-keyword">struct</span> {
	Msg <span class="hljs-type">string</span> <span class="hljs-string">`json:&quot;msg&quot;`</span>
}

<span class="hljs-comment">// PingService godoc</span>
<span class="hljs-comment">//</span>
<span class="hljs-comment">//	@summary		Send ping</span>
<span class="hljs-comment">//	@description	Pong!을 응답받습니다.</span>
<span class="hljs-comment">//	@accept			json</span>
<span class="hljs-comment">//	@param			Authorization	header		string	false	&quot;인증 키&quot;</span>
<span class="hljs-comment">//	@success		200	{object}	v1.PingResponse</span>
<span class="hljs-comment">//	@router			/api/v1/ping [get]</span>
<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">PingService</span><span class="hljs-params">(c *fiber.Ctx)</span></span> <span class="hljs-type">error</span> {
	c.JSON(PingResponse{
		Msg: <span class="hljs-string">&quot;Pong!&quot;</span>,
	})

	<span class="hljs-keyword">return</span> <span class="hljs-literal">nil</span>
}

</code></pre>
<p>이후 아래 명령어를 통해서 swagger 주석을 정렬해주는 것을 권장한다.</p>
<pre><code class="language-sh">swag <span class="hljs-built_in">fmt</span>
</code></pre>
<p>이후 문서를 생성한다.</p>
<pre><code class="language-sh">swag init
</code></pre>
<p>생성 중 오류가 발생하면 로그상에 친절하게 알려주며, 성공 시 프로젝트 폴더 하위에 <code>doc</code> 경로를 생성하고 관련 파일을 추가해준다.</p>
<p>이제는 문서를 확인해봐야할 차례이다.</p>
<p>문서를 fiber 웹에서 미들웨어를 통해 제공하기 위하여 아래 패키지를 추가한다.</p>
<pre><code class="language-sh">go get -u github.com/gofiber/swagger
</code></pre>
<p>이후 문서를 볼 수 있도록 라우팅을 추가해야 하는데.</p>
<p>우선 관련한 패키지 import 부터 한다.</p>
<pre><code class="language-go"><span class="hljs-string">&quot;github.com/gofiber/swagger&quot;</span>
_ <span class="hljs-string">&quot;모듈명/docs&quot;</span>
</code></pre>
<p>swagger의 fiber용 패키지와 swag init 명령어로 생성된 docs를 import 한다.</p>
<pre><code class="language-go">app.Get(<span class="hljs-string">&quot;/라우팅경로/*&quot;</span>, swagger.HandlerDefault)
</code></pre>
<p>위와 같이 라우팅을 해주면 완료.</p>
<p><img src="/static/img-2EsDJfAl80XdI6D_Xx--vIH-GL8dfyhJbGqEq1uTGS0.png" alt="image-20240217025220336"></p>
<p>이후 웹 페이지에 들어가면 다음과 같이 깔끔하게 API 문서가 생성되어 있다.</p>
<p>API 문서 테스트도 진행해볼 수 있다.</p>

</div>
</div>
<div class="kigui frame">
<script src="https://utteranc.es/client.js"
repo="lazyig/blog-comment"
issue-term="pathname"
label="blog-comment"
theme="github-light"
crossorigin="anonymous"
async>
</script>
</div>
</section>
</body>
</html>